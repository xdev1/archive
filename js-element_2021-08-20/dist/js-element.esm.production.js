import{adapt as e}from"js-element/core";export{Attr,attr,createCtx,createEvent,createRef,defineProvider,event,intercept,prop,ref}from"js-element/core";var n=function(e,t,r,o){var l;t[0]=0;for(var s=1;s<t.length;s++){var a=t[s++],i=t[s]?(t[0]|=a?1:2,r[t[s++]]):t[++s];3===a?o[0]=i:4===a?o[1]=Object.assign(o[1]||{},i):5===a?(o[1]=o[1]||{})[t[++s]]=i:6===a?o[1][t[++s]]+=i+"":a?(l=e.apply(i,n(e,i,r,["",null])),o.push(l),i[0]?t[0]|=2:(t[s-2]=0,t[s]=l)):o.push(i)}return o},t=new Map;var r={},o=[],l=function(e){this.events[e.type](e)},s=e=>null==e?e:e.key,a=(e,n,t,r,o)=>{"key"===n||("ref"===n?r!==t&&(t&&c(t,null),r&&c(r,e)):"o"===n[0]&&"n"===n[1]?((e.events||(e.events={}))[n=n.slice(2)]=r)?t||e.addEventListener(n,l):e.removeEventListener(n,l):!o&&"list"!==n&&"form"!==n&&(n in e||e.__alwaysSetProps&&"class"!==n&&!n.includes("-"))?(e[n]=null==r?"":r,e.__alwaysSetProps&&(e.__props[n]=r,e.__ctrl.refresh())):null==r||!1===r?e.removeAttribute(n):e.setAttribute(n,r))},i=(e,n)=>{var t=e.props,r=3===e.type?document.createTextNode(e.tag):(n=n||"svg"===e.tag)?document.createElementNS("http://www.w3.org/2000/svg",e.tag,{is:t.is}):document.createElement(e.tag,{is:t.is});for(var o in t)a(r,o,null,t[o],n);for(var l=0;l<e.children.length;l++)r.appendChild(i(e.children[l]=u(e.children[l]),n));return e.node=r},p=(e,n,t,r,o)=>{if(t===r);else if(null!=t&&3===t.type&&3===r.type)t.tag!==r.tag&&(n.nodeValue=r.tag);else if(null==t||t.tag!==r.tag)t&&d(t),n=e.insertBefore(i(r=u(r),o),n),t&&e.removeChild(t.node);else{var l,c,f,h,g=t.props,v=r.props,m=t.children,y=r.children,_=0,C=0,w=m.length-1,E=y.length-1;for(var A in o=o||"svg"===r.tag,{...g,...v})("value"===A||"selected"===A||"checked"===A?n[A]:g[A]!==v[A])&&a(n,A,g[A],v[A],o);for(;C<=E&&_<=w&&null!=(f=s(m[_]))&&f===s(y[C]);)p(n,m[_].node,m[_++],y[C]=u(y[C++]),o);for(;C<=E&&_<=w&&null!=(f=s(m[w]))&&f===s(y[E]);)p(n,m[w].node,m[w--],y[E]=u(y[E--]),o);if(_>w)for(;C<=E;)n.insertBefore(i(y[C]=u(y[C++]),o),(c=m[_])&&c.node);else if(C>E)for(;_<=w;)n.removeChild(m[_].node),d(m[_++]);else{var N={},b={};for(A=_;A<=w;A++)null!=(f=m[A].key)&&(N[f]=m[A]);for(;C<=E;)f=s(c=m[_]),h=s(y[C]=u(y[C])),b[f]||null!=h&&h===s(m[_+1])?(null==f&&(n.removeChild(c.node),d(c)),_++):null==h||1===t.type?(null==f&&(p(n,c&&c.node,c,y[C],o),C++),_++):(f===h?(p(n,c.node,c,y[C],o),b[h]=!0,_++):null!=(l=N[h])?(p(n,n.insertBefore(l.node,c&&c.node),l,y[C],o),b[h]=!0):p(n,c&&c.node,null,y[C],o),C++);for(;_<=w;)null==s(c=m[_++])&&(n.removeChild(c.node),d(c));for(var A in N)null==b[A]&&(n.removeChild(N[A].node),d(N[A]))}}return r.node=n},u=e=>!0!==e&&!1!==e&&e?e:g(""),c=(e,n)=>e&&("function"==typeof e?e(n):e.current=n),d=e=>e&&e.props&&e.props.ref&&c(e.props.ref,null),f=e=>3===e.nodeType?g(e.nodeValue,e):h(e.nodeName.toLowerCase(),r,o.map.call(e.childNodes,f),1,e),h=(e,n,t,r,o)=>({tag:e,props:n,key:n.key,children:t,type:r,node:o}),g=(e,n)=>h(e,r,o,3,n),v=(e,n,t=o)=>h(e,n||r,Array.isArray(t)?t:[t]),m=(e,n)=>((e=p(e.parentNode,e,e.vdom||f(e),n)).vdom=n,e);const{createComponentType:y,createCustomElementClass:_,registerElement:C}=e.prototype.toString.__getHiddenAPI(),{define:w,render:E,impl:A}=e({isMountable:e=>!!e&&!0===e.isVElement,patchContent:function(e,n){if(n.hasChildNodes())m(n.firstChild,e);else{const t=document.createElement("span");n.append(t),m(t,e)}}}),N=function(e){var r=t.get(this);return r||(r=new Map,t.set(this,r)),(r=n(this,r.get(e)||(r.set(e,r=function(e){for(var n,t,r=1,o="",l="",s=[0],a=function(e){1===r&&(e||(o=o.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?s.push(0,e,o):3===r&&(e||o)?(s.push(3,e,o),r=2):2===r&&"..."===o&&e?s.push(4,e,0):2===r&&o&&!e?s.push(5,0,!0,o):r>=5&&((o||!e&&5===r)&&(s.push(r,0,o,t),r=6),e&&(s.push(r,e,0,t),r=6)),o=""},i=0;i<e.length;i++){i&&(1===r&&a(),a(i));for(var p=0;p<e[i].length;p++)n=e[i][p],1===r?"<"===n?(a(),s=[s],r=3):o+=n:4===r?"--"===o&&">"===n?(r=1,o=""):o=n+o[0]:l?n===l?l="":o+=n:'"'===n||"'"===n?l=n:">"===n?(a(),r=1):r&&("="===n?(r=5,t=o,o=""):"/"===n&&(r<5||">"===e[i][p+1])?(a(),3===r&&(s=s[0]),r=s,(s=s[0]).push(2,0,r),r=0):" "===n||"\t"===n||"\n"===n||"\r"===n?(a(),r=2):o+=n),3===r&&"!--"===o&&(r=4,s=s[0])}return a(),s}(e)),r),arguments,[])).length>1?r:r[0]}.bind(x),b=new Map;function k(e){return"number"==typeof e||"string"==typeof e?g(e,null):e}function P(e,n,t){return y(e)}function x(e,n){const t=arguments.length;let r="function"==typeof e?e.tagName:e;if(!r&&"function"==typeof e){const n=(e,n)=>{e.__alwaysSetProps=!0,e.__props={},e.__ctrl=n},t=e.name?L(e.name.replace("$","x")):"ce";if(b.has(t)){const e=b.get(t);b.set(t,e+1),r=t+"--n"+(e+1)}else b.set(t,1),r=t+"--n1";e=_(r,n,e,E),Object.defineProperty(e,"tagName",{value:r}),C(r,e)}const o=t>2?[]:S;if(t>2)for(let e=2;e<t;++e){const n=arguments[e];if(Array.isArray(n))for(let e=0;e<n.length;++e)o.push(k(n[e]));else o.push(k(n))}const l=v(r,n||j,o);return l.isVElement=!0,l}const S=[],j={};function L(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase()}export{P as asComponent,w as define,x as h,N as html,A as impl,E as render};
